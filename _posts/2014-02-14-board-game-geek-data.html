---
layout: post
title: Board Game Geek Data - Sliced and Diced
date: '2014-02-14T12:16:00.002+01:00'
author: Morten
tags:
- Programming
- boardgaming
- D3
- hack
- gist
- source code
- API
- Ruby
- Databases
modified_time: '2014-02-14T12:18:01.228+01:00'
thumbnail: http://2.bp.blogspot.com/-ZRePT80ZRMY/Uv3yHaiEt9I/AAAAAAABXCw/sYnGSlKbRIg/s72-c/Screen+Shot+2014-02-14+at+11.27.08.png
blogger_id: tag:blogger.com,1999:blog-6967032375013519080.post-4183620071726127765
blogger_orig_url: https://m635j520.blogspot.com/2014/02/board-game-geek-data.html
---

<span style="font-size: 17px; line-height: 32px;"><span style="font-family: inherit;">Inspired by the <a href="http://m635j520.blogspot.com/2014/01/sip-reviews-of-newish-board-games-i.html" target="_blank">discovery</a> of the <a href="http://boardgamegeek.com/wiki/page/BGG_XML_API" target="_blank">API</a> for the BoardGameGeek <a href="http://boardgamegeek.com/" target="_blank">website</a>, I decided to play around with some of its data by some Ruby and JavaScript scripting. One thing I wanted to look at was the interconnectedness of game mechanics, but first I wanted to find alternative ways to look at how to measure ones "use" of ones game collection, and the associated question of "can a board game collection ever be too big?".</span></span><br /><span style="font-size: 17px; line-height: 32px;"><span style="font-family: inherit;"><br /></span></span> <br /><h3><a href="http://www.flickr.com/photos/mortenjohs/10778195013/" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;" title="Akvariefisk by mortenjohs, on Flickr"><img alt="Akvariefisk" src="http://farm4.staticflickr.com/3750/10778195013_c5c96255cf.jpg" height="332" width="500" /></a><span style="font-size: 17px; line-height: 32px;"><span style="font-family: inherit;">H-index and play per game</span></span></h3><div style="background-color: white; margin-bottom: 1.5em;"><span style="font-family: inherit;"><span style="font-size: 17px; line-height: 32px;">For example, the concept of </span></span><a href="http://en.wikipedia.org/wiki/H-index" style="font-family: inherit; font-size: 17px; line-height: 32px;" target="_blank">H-index</a><span style="font-family: inherit;"><span style="font-size: 17px; line-height: 32px;">&nbsp;is being discussed quite a bit on the ’geek. In short this entails sorting your games by number of plays and finding the last entry in the list with a number of plays higher than (or equal to) the position in the list. It’s rank is your H-index. (This does, of course require one to&nbsp;</span></span><span style="font-size: 17px; line-height: 32px;">meticulously</span><span style="font-family: inherit;"><span style="font-size: 17px; line-height: 32px;">&nbsp;log ones plays, but that is another story… For example my overall BGG H-index for the last 12 months is (or seems to be) a measly 5.) Another concept used is to take the number og games owned and divide that by number of total plays (in for example the last 12 months).</span></span></div><h3><span style="font-family: inherit;">Introducing play time</span></h3><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">The problem with both those measures is, obviously, that it disregards play time. A game that takes 10 minutes to play, would (probably) more easily get more play time than a game that takes 4+ hours. So, my first experiment entailed sorting games by play time. To do this I just used the, admittedly rather crude, notion of “play time” in the bgg database and multiply that by the logged number of plays.</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">Here’s my top 7 by play time:&nbsp;</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"></div><ol><li><span style="font-family: inherit;">[“Pandemic”, 405],</span></li><li><span style="font-family: inherit;">[“The Settlers of Catan”, 270],</span></li><li><span style="font-family: inherit;">[“Puerto Rico”, 270],</span></li><li><span style="font-family: inherit;">[“Nations”, 240],&nbsp;</span></li><li><span style="font-family: inherit;">[“Coloretto”, 210],&nbsp;</span></li><li><span style="font-family: inherit;">[“Terra Mystica”, 200],&nbsp;</span></li><li><span style="font-family: inherit;">[“Dominant Species”, 180]</span></li></ol><br /><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">Compared to my top 7 by number of plays:&nbsp;</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"></div><ol><li><span style="font-family: inherit;">[“Pandemic”,9],&nbsp;</span></li><li><span style="font-family: inherit;">[“Coloretto”,7],&nbsp;</span></li><li><span style="font-family: inherit;">[“Martian Dice”,7],&nbsp;</span></li><li><span style="font-family: inherit;">[“7 Wonders”,6],&nbsp;</span></li><li><span style="font-family: inherit;">[“King of Tokyo”,6],&nbsp;</span></li><li><span style="font-family: inherit;">[“Love Letter”,6],&nbsp;</span></li><li><span style="font-family: inherit;">[“Dominion”,5]</span></li></ol><br /><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">Nothing shocking. (Except that it does highlight how flaky my BGG logging has been at times…)</span></div><h3><span style="font-family: inherit;">And now, mechanics</span></h3><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">OK, next I explored the game mechanics elements in the BGG database. Each game can be assigned many game mechanics, so I wanted to break down playtime of my own games by mechanics, instead of by game. The formula I came up with is simply the following:</span></div><blockquote class="tr_bq"><span style="font-family: inherit;">time for mechanics equals sum of play time of game containing mechanic divided by number of mechanics in that particular game</span></blockquote><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">That gives me this list of top 7 game mechanics by play time:&nbsp;</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"></div><ol><li><span style="font-family: inherit;">[“Variable Player Powers”, 517],&nbsp;</span></li><li><span style="font-family: inherit;">[“Hand Management”, 468],&nbsp;</span></li><li><span style="font-family: inherit;">[“Card Drafting”, 397],&nbsp;</span></li><li><span style="font-family: inherit;">[“Set Collection”, 346],&nbsp;</span></li><li><span style="font-family: inherit;">[“Route/Network Building”, 308],&nbsp;</span></li><li><span style="font-family: inherit;">[“Variable Phase Order”, 295],&nbsp;</span></li><li><span style="font-family: inherit;">[“Area Control / Area Influence”, 242]</span></li></ol><a href="http://www.flickr.com/photos/mortenjohs/10777967116/" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;" title="Akvariesjøløve by mortenjohs, on Flickr"><img alt="Akvariesjøløve" src="http://farm8.staticflickr.com/7432/10777967116_ac643c0895.jpg" height="332" width="500" /></a><br /><h3>The rating of mechanics</h3><span style="background-color: white; font-family: inherit; font-size: 17px; line-height: 32px;">One of the main interests of BGG is to be able to rate games, I guess, so by extending my code to generate a list of mechanics by rating. To do this I basically used the same formula as above, but replaced playtime with rating - and normalized it afterwards. So:</span><br /><blockquote class="tr_bq"><span style="font-family: inherit;">rating for mechanics equals sum of ratings of game containing mechanic divided by sum of one over the number of mechanics in each game containing that mechanic.</span></blockquote><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">So, my top 7 mechanics by rating is:&nbsp;</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"></div><ol><li><span style="font-family: inherit;">[“Variable Phase Order”, 9.46, “# of games: 5 (Weight: 2.92)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Commodity Speculation”, 9.0, “# of games: 1 (Weight: 0.33)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Worker Placement”, 9.0, “# of games: 2 (Weight: 1.17)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Area Enclosure”, 8.75, “# of games: 5 (Weight: 2.67)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Voting”, 8.5, “# of games: 2 (Weight: 0.67)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Deck / Pool Building”, 8.5, “# of games: 4 (Weight: 1.33)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Auction/Bidding”, 8.32, “# of games: 4 (Weight: 1.48)”]</span></li></ol><br /><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">The weight is simply the sum of 1/number of mechanics in each game containing that mechanic and gives an indication of “trustwortyness” of the rating, I guess.</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">You can also look at the bottom 7 by rating, of course:&nbsp;</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"></div><ol><li><span style="font-family: inherit;">[“Dice Rolling”, 6.06, “# of games: 8 (Weight: 2.76)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Pattern Recognition”, 5.75, “# of games: 2 (Weight: 1.33)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Hex-and-Counter”, 5.0, “# of games: 1 (Weight: 0.5)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Roll / Spin and Move”, 2.0, “# of games: 3 (Weight: 1.64)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Betting/Wagering”, 2.0, “# of games: 1 (Weight: 0.33)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Paper-and-Pencil”, 2.0, “# of games: 1 (Weight: 1.0)”],&nbsp;</span></li><li><span style="font-family: inherit;">[“Stock Holding”, 2.0, “# of games: 1 (Weight: 0.14)”]</span></li></ol><br /><h3><span style="font-family: inherit;">Combos</span></h3><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">But these mechanics doesn’t operate on their own, so I wanted to see what combinations of mechanics appear often - or never, in my games and generated the following lists.</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">Top 7 game mechanics combined with “Hand Management”:&nbsp;</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"></div><ol><li><span style="font-family: inherit;">[“Set Collection”, 20],&nbsp;</span></li><li><span style="font-family: inherit;">[“Card Drafting”, 15],&nbsp;</span></li><li><span style="font-family: inherit;">[“Variable Player Powers”, 10],&nbsp;</span></li><li><span style="font-family: inherit;">[“Area Control / Area Influence”, 9],&nbsp;</span></li><li><span style="font-family: inherit;">[“Simultaneous Action Selection”, 9],&nbsp;</span></li><li><span style="font-family: inherit;">[“Deck / Pool Building”, 8],&nbsp;</span></li><li><span style="font-family: inherit;">[“Route/Network Building”, 7]</span></li></ol><br /><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">Top 7 game mechanics combined with “Set Collection”:&nbsp;</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"></div><ol><li><span style="font-family: inherit;">[“Hand Management”, 20],&nbsp;</span></li><li><span style="font-family: inherit;">[“Card Drafting”, 15],&nbsp;</span></li><li><span style="font-family: inherit;">[“Tile Placement”, 10],&nbsp;</span></li><li><span style="font-family: inherit;">[“Variable Player Powers”, 9],&nbsp;</span></li><li><span style="font-family: inherit;">[“Area Control / Area Influence”, 8],&nbsp;</span></li><li><span style="font-family: inherit;">[“Worker Placement”, 7],&nbsp;</span></li><li><span style="font-family: inherit;">[“Simultaneous Action Selection”, 6]</span></li></ol><br /><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">Top 7 game mechanics combined with “Card Drafting”:&nbsp;</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"></div><ol><li><span style="font-family: inherit;">[“Set Collection”, 15],&nbsp;</span></li><li><span style="font-family: inherit;">[“Hand Management”, 15],&nbsp;</span></li><li><span style="font-family: inherit;">[“Variable Player Powers”, 7],&nbsp;</span></li><li><span style="font-family: inherit;">[“Route/Network Building”, 6],&nbsp;</span></li><li><span style="font-family: inherit;">[“Tile Placement”, 5],&nbsp;</span></li><li><span style="font-family: inherit;">[“Deck / Pool Building”, 5],&nbsp;</span></li><li><span style="font-family: inherit;">[“Simultaneous Action Selection”, 4]</span></li></ol><br /><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">And so on…&nbsp;</span></div><h3><span style="font-family: inherit;">And (inter)action</span></h3><div style="background-color: white; margin-bottom: 1.5em;"><span style="font-family: inherit;"><span style="font-size: 17px; line-height: 32px;">Fascinating. However it is always fun to&nbsp;</span></span><span style="font-size: 17px; line-height: 32px;">visualise</span><span style="font-family: inherit;"><span style="font-size: 17px; line-height: 32px;">&nbsp;data. To get an interactive visual apreciation of the interconnectedness of these mechanics I decided to try to visualise them using D3. First with a force graph. Each node represents a game mechanic, their colours reflect the ratings, their size their weights, and the edges in the graph is the number of times they appear together in the same game.</span></span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">This is what that entangled mess looks like:</span></div><div class="separator" style="clear: both; text-align: center;"><span style="font-family: inherit; margin-left: 1em; margin-right: 1em;"><a href="http://2.bp.blogspot.com/-ZRePT80ZRMY/Uv3yHaiEt9I/AAAAAAABXCw/sYnGSlKbRIg/s1600/Screen+Shot+2014-02-14+at+11.27.08.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-ZRePT80ZRMY/Uv3yHaiEt9I/AAAAAAABXCw/sYnGSlKbRIg/s1600/Screen+Shot+2014-02-14+at+11.27.08.png" height="338" width="400" /></a></span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">(<a href="https://googledrive.com/host/0B81XUQeTOaqpd1diLURxZGN2WjQ/bgg-analyzer/index.html" style="color: #308bd8; text-decoration: none;">Click for an interactive version</a>.)</span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">Next I wanted to see if a matrix view of it would make more sense, so I ended up with this:</span></div><div class="separator" style="clear: both; text-align: center;"><span style="font-family: inherit; margin-left: 1em; margin-right: 1em;"><a href="http://3.bp.blogspot.com/-29VvYn8RD84/Uv3yMlq3bPI/AAAAAAABXC4/uZ2tNOE41Ts/s1600/Screen+Shot+2014-02-14+at+11.26.09.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-29VvYn8RD84/Uv3yMlq3bPI/AAAAAAABXC4/uZ2tNOE41Ts/s1600/Screen+Shot+2014-02-14+at+11.26.09.png" height="235" width="400" /></a></span></div><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;"><span style="font-family: inherit;">(<a href="https://googledrive.com/host/0B81XUQeTOaqpd1diLURxZGN2WjQ/bgg-analyzer/matrix.html" style="color: #308bd8; text-decoration: none;">Click for an interactive version</a>.)</span></div><h3>The Possible Futures</h3><h4>Simplifications</h4><div style="background-color: white; font-size: 17px; line-height: 32px; margin-bottom: 1.5em;">There's still too much going on in these visualisations, so some simplification could be interesting to look into. Like PCA - principle component analysis, why not?</div><h4>Look at arbitrary user data</h4><div style="background-color: white; margin-bottom: 1.5em;"><span style="font-family: inherit;"><span style="font-size: 17px; line-height: 32px;">For now my scripts are locked to my own user data, but there is&nbsp;</span></span><span style="font-size: 17px; line-height: 32px;">of course</span><span style="font-family: inherit;"><span style="font-size: 17px; line-height: 32px;">&nbsp;nothing hindering me in writing this as a kind of web service where users can explore their own data.</span></span></div><h4><span style="font-family: inherit;"><span style="font-size: 17px; line-height: 32px;">Improving the&nbsp;</span></span><span style="font-size: 17px; line-height: 32px;">visualisations</span></h4><div style="background-color: white; margin-bottom: 1.5em;"><span style="font-size: 17px; line-height: 32px;">There are many ways to improve the&nbsp;visualisations. The ones I presented above are not-very-heavily-modified versions of Mark Bostock's D3 example code.</span></div><h3><span style="font-family: inherit;">Conclusion</span></h3><div style="background-color: white; margin-bottom: 1.5em;"><span style="font-family: inherit; font-size: 17px; line-height: 32px;">The moral of the story is that I'll try to be better at logging my board game plays...</span></div><div style="background-color: white; margin-bottom: 1.5em;"><span style="font-size: 17px; line-height: 32px;">Also,</span><span style="font-size: 17px; line-height: 32px;">&nbsp;</span><span style="font-size: 17px; line-height: 32px;">if anyone wants to improve upon my "work" I've&nbsp;</span><span style="font-size: 17px; line-height: 32px;">left all my Ruby code as a&nbsp;<a href="https://gist.github.com/mortenjohs/8999316" target="_blank">gist on github</a>.</span></div>