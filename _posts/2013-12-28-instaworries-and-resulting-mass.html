---
layout: post
title: Instaworries -- and a resulting mass unfollowing hack
date: '2013-12-28T13:22:00.000+01:00'
author: Morten
tags:
- hack
- gist
- fix
- Ruby
- socialmedia
modified_time: '2013-12-29T00:12:43.503+01:00'
blogger_id: tag:blogger.com,1999:blog-6967032375013519080.post-4486447473556674039
blogger_orig_url: https://m635j520.blogspot.com/2013/12/instaworries-and-resulting-mass.html
---

<a href="http://www.flickr.com/photos/mortenjohs/11601773813/" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;" title="Self Portrait in Christmas Ball by mortenjohs, on Flickr"><img alt="Self Portrait in Christmas Ball" height="320" src="http://farm3.staticflickr.com/2811/11601773813_8704134084.jpg" width="320" /></a>The other day I noticed/remembered that I had an instagram account. And, according to my sister, I was quite active on it. Apparently. I kept following new persons. That suprised me, so I logged on and investigated. “I” followed 974 (or so) persons I had never heard of… My first instinct was to delete the account.* But that would have been too easy, so I decided to investigate the Instagram-API to see if that could help me “get rid” (most) of the people I followed. And lo and behold I found <a href="http://instagram.com/developer/endpoints/relationships/#post_relationship" target="_blank">this page</a>&nbsp;- very promising, so I registered an app to get access to this. Since Instagram uses OAuth that landed me a client ID and a client secret.<br /><br />Not awfully familiar with the innards of OAuth, I realized that for anything to work I would need an access token. Since this script was just for personal use, I figured I could just generate this once(ish) and use that to get access to <em>my</em> account. I followed the instructions on this (page):&nbsp;<a href="http://dmolsen.com/2013/04/05/generating-access-tokens-for-instagram/">http://dmolsen.com/2013/04/05/generating-access-tokens-for-instagram/</a> to generate the token. The only change I did, since we want to be able to manipulate followers/relationships, was to add a “&amp;scope=relationships” to the end of the url to get the pre-token “code”, like so:<br /><div class="gistLoad" data-id="8158872" id="gist-8158872"></div><br />(Admittedly, this took some trial and error and duckduckgoing to figure out…)<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://www.flickr.com/photos/mortenjohs/11382240385/" style="margin-left: 1em; margin-right: 1em;" title="In the oven by mortenjohs, on Flickr"><img alt="In the oven" height="265" src="http://farm6.staticflickr.com/5503/11382240385_846af093ac.jpg" width="400" /></a></div>Equiped with the resulting many character access token I set about to write a unfollowing script thingy using good old ruby, leveraging the already existing <a href="http://github.com/Instagram/instagram-ruby-gem" target="_blank">Instagram gem</a>. One “gem install instagram” later I started hacking. <br />After setting up the Instagram object with the client id and secret, I actually only use the instagram gem for loading of the list of followers, like so: <br /><div class="gistLoad" data-id="8158604" id="gist-8158604"></div>I realized that I had some “real” followers that I do not want to unfollow, so before unfollowing any user I check to see that their id is not among my followers.<br /><br />To do the actual unfollowing I just access the REST API directly using the HTTPI gem and my access token, like so: <br /><div class="gistLoad" data-id="8158552" id="gist-8158552"></div>The only problem with this approach is that the API has some restrictions on number of calls per day, so I need to keep running this script once a day for… quite some days.<br /><br />*Well, that is a lie. First I changed the password...    <script src="https://raw.github.com/moski/gist-Blogger/master/public/gistLoader.js" type="text/javascript"></script>