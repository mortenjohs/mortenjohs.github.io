---
layout: post
title: D3 Map Projections Morphing
date: '2013-02-09T00:04:00.000+01:00'
author: Morten
tags:
- JavaScript
- Programming
- D3
- maps
- hack
- gist
- web
- visualization
modified_time: '2013-02-10T13:46:19.647+01:00'
blogger_id: tag:blogger.com,1999:blog-6967032375013519080.post-552778164452286528
blogger_orig_url: https://m635j520.blogspot.com/2013/02/d3-map-projections-morphing.html
---

<table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: right; margin-left: 1em; text-align: right;"><tbody><tr><td style="text-align: center;"><a href="http://www.flickr.com/photos/mortenjohs/8457076346/" style="clear: right; margin-bottom: 1em; margin-left: auto; margin-right: auto;" title="Australia in Australia by mortenjohs, on Flickr"><img alt="Australia in Australia" height="334" src="http://farm9.staticflickr.com/8232/8457076346_10612da066.jpg" width="500" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Map of Australia mapped on Australia</td></tr></tbody></table>We had a very good geography teacher in high school. He taught us how one should be sceptical and keep an open mind in science (using an anecdote about a scientist proposing an alternative to the theory of tectonic drift). He was also the first person I met that had surfed the Internet - or whatever it was called back in the day. But the thing he showed me the importance of, most relevant to this blog post, is the choice of projections of world maps. You know, the whole 3D globe to 2D piece of paper business. Mapping, qoui. Some are just more equal than others.<br /><br />You see, yesterday evening I decided to finally take a closer look at the D3&nbsp;visualization&nbsp;library. A couple of the <a href="https://github.com/mbostock/d3/wiki/Gallery" target="_blank">demos</a> on the <a href="http://d3js.org/" target="_blank">d3js page</a>, notably the excellent animated&nbsp;<a href="http://bl.ocks.org/1256572" target="_blank">show reel</a> and some of the <a href="http://bl.ocks.org/2206590" target="_blank">mapping examples</a>, made me think of discussions I have had with colleagues and friends on map projections. I wondered if animating the transition from one projection to another would help show the problems with certain (overused) projections (like the omnipresent Mercator (we are no longer colonialist seafarers, now, are we?)).<br /><br />I created a quick hack, based on some example code from the d3.geo-library, added some simple selection box controls, and transition animations, and&nbsp;voilà:&nbsp;<a href="http://bl.ocks.org/4742558">http://bl.ocks.org/4742558</a>&nbsp;- an interactive animated map projection demonstration tool. Try switching between Mercator and some (more) area preserving projection (like a cylindrical one) and you'll catch my drift. (Word of warning: some projections tend to crash the browser - probably because of my naïve implementation of swapping between them. (I'll try to take out &nbsp;the misbehaving ones - or at least flag them.))<br /><br />The source code behind this is displayed prominently below the map if you follow the link above. (Another word of warning:&nbsp;JavaScript&nbsp;is not exactly my mother tongue.) (Al)so, there are several weird features that I've been to lazy to take care of...<br /><br />I revisited this hack today, though, and made it look neater (with blue water - that is for you, Seb) - and the code is (maybe) cleaner, but morphing between projections looks more messy - probably due to my limited understanding of both&nbsp;JavaScript&nbsp;and D3:&nbsp;<a href="http://bl.ocks.org/4739921">http://bl.ocks.org/4739921</a><br /><br />Bottom line is: I'm really excited about the potential of the D3 library! Thanks&nbsp;<a href="http://bost.ocks.org/mike/" rel="author" style="color: steelblue; font-family: 'Helvetica Neue', Helvetica, sans-serif; font-size: small;">Michael Bostock</a>!<br /><br />(And I do of course realize that not all of these D3 projections were made for world maps...)<br /><br />Update: I guess I should go through the projections one by one and set the correct scale, so the maps keep their general size better. Also, it could be interesting to pan in a more reasonable manner. (Especially the orto-projections.)